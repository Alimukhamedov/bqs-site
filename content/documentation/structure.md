Title: Структура  
Description: Документация к Bitrix Quick Start, Структура и назначение файлов
Date: 2015-09-20 16:08 
Robots: index,follow

----

# Структура и назначение файлов Bitrix Quick Start

Разработку сайта на Bitrix, актуальной версии следует производить в папке local. [Читаем для чего и зачем нужна папка local](http://dev.1c-bitrix.ru/community/blogs/vad/local-folder.php).

**Типовая структура файлов проекта выглядит так:**

```md
auth/
bitrix/
└── php_interface/
    ├── this_site_support.php
    └── site_closed.php
favicons/
local/ 
├── codenails/
│   ├── css/
│   ├── images/
│   ├── includes/
│   ├── js/
│   │   ├── -jquery.min.js
│   │   ├── jquery.nicecode.min.js
│   │   └── main.js
│   └── less/
├── components/
├── gadgets/
├── logs/
├── modules/
├── php_interface/
│   ├── cn_autoloader.php
│   ├── cn_log.php
│   └── init.php
└── templates/
    ├── .default
    └── rename_me
        ├── description.php
        ├── footer.php
        └── header.php
personal/
├── cart/
├── order/
├── profile/
└── subscribe/
search/
.htaccess_example
404.php
favicon.ico
index.php
robots.txt
```


## auth/{#auth}
Папка, для тех, кто забывает положить форму для восстановления пароля. Ну и авторизация по умолчанию.

##bitrix/php_interface/{#php_interface}
- **this_site_support.php** — Информация о партнёре и техподдержке (нужна по требованиям монитора качества). Отображается внизу формы авторизации в админке. Этот файл не подхватывается из local, возможно со временем исправят.
![Информация о поддержке и партнёре](https://dl.dropboxusercontent.com/u/8142395/this_site_support.png "Информация о поддержке и партнёре"){.col-margin}
- **site_closed.php** — [Красивая заглушка](http://jsfiddle.net/eoq287rd/embedded/result/) для отключенной публички. К сожалению пока этот файл не подхватывается из папки local.

## favicons/{#favicons}

Папка с различными иконками под все устройства о основные ОС, нужны для красивого отображения сайта при добавлении в закладки, на рабочие столы и т.д.

Для генерации иконок очень хорошо подходит сервис [realfavicongenerator](http://realfavicongenerator.net/).

<div class="tip">
    :facepunch: Не забываем пнуть ленивого дизайнера, чтоб отрисовал нормальные иконки.
</div>

## local/{#local}
Основная папка проекта. 

### local/codenails/{#codenails}
В этой папке содержатся файлы, относящиеся к вёрстке (стили, скрипты, картинки шаблона), а так же включаемые области и php-файлы, отвечающие на ajax-запросы.

#### local/codenails/css/
- template_styles.css — Скомпилированный CSS-файл, который подключается в шаблон. 
- Так же в эту папку складываем все CSS-файлы, которые не требуется включать с LESS по различным соображениям (*к примеру не требующий правок файл какого-нибудь плагина для jQuery*). Файлы подключаются в автоматическом через cnAsset.


#### local/codenails/images/

- В эту папку кладём картинки шаблона. 
- Не забываем пользоваться сервисом [kraken.io](https://kraken.io/web-interface). И не забываем, что нужно тыкать в кнопку LOSSLESS, иначе рискуем попортить кач-во картинок. 
- Не забываем загонять мелкие картинки в [base64](http://base64-image.ru/). 
- Если нужны временные картинки, не нужно копировать их из макета, [используйте сервис](http://img.base64-image.ru/) (и плагин для SublimeText) **не захламляйте папку не нужной фигнёй.**
- **ie_logo.png** - не удаляем картинку, она отображается в админке (см раздел про минитор качества)

#### local/codenails/includes/

- Папка для включаемых областей сайта.
- Сюда можно складывать в т.ч. чистую вёрстку и инклудить через конструкцию:
```php
include_once ('local/codenails/includes/incfile.php');
```

#### local/codenails/js/

- **-jquery.min.js** — Локальная копия jquery. Черточка в начале имени файла обеспечит исключение этого файла из автозагрузки через cn_autoloader.
- **main.js** — Основной js-файл. Сюда пишем основные скрипты шаблона.
- **jquery.nicecode.min.js** — Плагин [niceCode](http://pafnuty.github.io/jQuery.niceCode/) для удобного отображения внешнего вида отладки. 
- Не забываем что для показа отладки в окошке писать надо так:
```php
cn_pr($arResult, false, 'arResult');
// или
bxPrintr($arResult, false, 'arResult');
// или
dump($arResult, '-s');
```
- Сюда же складываем другие js-файлы и плагины jquery, необходимые для работы шаблона, которые будут подгружаться через автозагрузчик cn_autoload.

:bangbang: **Не забываем, что плагины нужно [минимизировать](http://javascript-minifier.com/)**, а называть следует по маске **jquery.*[pluginname]*.min.js**. Так же хорошо бы в начало файла плагина размещать информацию о том, откуда он взят, пример такой информации в плагине niceCode. 

**Не ленитесь, потом сами же задолбаетесь искать откуда ноги растут у плагина.**

#### local/codenails/less/

- **less.php** — Файл компилятора LESS, для подключения в шаблон сайта.
- **less-verstka.php** — То же самое, но для чистой вёрстки.
- **lessphp.class.php** — библиотека компилятора.
- **template_styles.less** — главный less-файл, в котором происходит подключение - всех других файлов.
- **main.less** — основной less-файл, в который пишем наш код.
- Так же в этой папке лежат ещё куча разных файлов, для подключения/отключения которых просто комментим их строки вызова в template_styles.less
- Имя LESS-файла следует **начинать с двухзначной цифры**, после которой идёт тире и пояснительное название файла, понятное для человека.
    - Это даст в будущем возможность нормального восприятия структуры файлов и возможно <s>силу и энергию земли</s> автоподхват файлов по аналогии с автолоадером.
    - **Пояснения к цифрам:**
    - **00-09** — файлы, которые не попадают в результирующий CSS (миксины, переменные и т.д.)
    - **10-19** — файлы, которые обязательно должны присутствовать, задают костяк шаблона (сетка, кнопки, иконки, формы и т.д.) и оформляют стандартные элементы html.
    - **20-79** — различные дополнительные файлы, отвечающие за оформление конкретных кусков вёрстки (меню, модальные окна, слайдеры, хлебные крошки, каталог и т.д.)
    - **80-main.less** — основной файл стилей сайта, сюда как правило пишется всё, что относится к конкретному сайту, это уникальный для каждого проекта файл, если куски кода кочуют в этом файле из проекта в проект - значит надо выносить их в отдельный файлы в пределах имён 20-79.

### local/components/

Папка для размещения собственных компонентов.

### local/gadgets/

Папка для размещения гаджетов рабочего стола (*возможно когда-нибудь мы будем туда класть загортовки гаджетов*)

### local/logs/
Папка для хранения логов (туда автоматом записывается лог, создаваймый классом CNLog).

### local/modules/

Папка для размещения собственных модулей.

### local/php_interface/
- **cn_autoloader.php** — Автозагрузчик скриптов и стилей (*пример вызова в header.php*)
- **cn_log.php** — Класс для ведения наглядного лога, нужен для удобной отладки того, что тяжело отладить (*пример вызова в init.php*)
- **init.php** — init.php сайта, в который инклудится дефолтный init.php. Так же там присутствует полезная сео-функция, добавляющая слеш туда, где он должен стоять на конце.


### local/templates/
- **.default** — папка с шаблонами компонентов.
- **rename_me** — папка с шаблоном сайта, не забываем переименовать.
    - **header.php** — шапка сайта.
    - **footer.php** — подвал сайта.
    - **description.php** — описание шаблона.

## search/
Папка, отвечающая за поиск по сайту и формирование карты сайта (*не sitemap.xml, а непонятная сущьность, формирующаяся из меню сайта*).

### .htaccess_example
Не забываем удалить этот файл, предварительно прочитав и сделав, как написано. Тут лежит пример правильной склейки зеркал для apache.

### 404.php
404-я страничка.

Title: Вёрстка собственных проектов
Description: Регламент по вёрстке собственных проектов
Template: index 

----

#Вёрстка собственных проектов

<div class="tip">
    :construction: Страница не закончена. <a href="https://github.com/pafnuty/bqs-site/blob/dev/content/frontend.md" class="btn btn-small" target="_blank">Редактировать</a>
</div>

На этапе вёрстки собственных проектов необходимо на основе графического макета произвести html-вёрстку сайта, которая будет передана на следующий этап разработки.

##Основные принципы работы
Код, выполняемый на клиентской стороне (то есть в браузере) — это работа верстальщика.

<div class="alert alert.info">
    <div class="h2">Внимание!</div>
    Техническое задание проекта имеет больший приоритет, нежели данный документ и в случаи спорных ситуаций следует руководствоваться техническим заданием.
</div>

Работы, которые должен делать верстальщик на этапе, называемом версткой:
- **[Создание структуры расположения файлов и папок](#user-content-base).**
- **[Общие принципы построения вёрстки](#user-content-principle).**
- **[Разметка кода на php/html](#user-content-php-html).**
- **[Создание стилей less/css](#user-content-less-css).**
- **[Написание необходимых скриптов js/jQuery](#user-content-js-jquery).**
- **[Подготовка изображений](#user-content-images).**
- **[Тестирование кода в различных браузерах, которые прописанных в ТЗ](#user-content-testing).**

## Следующие работы в понятие «верстка» не входят:
- Интеграция с CMS Bitrix.
- Написание скриптов, использующих данные из БД, а также логика их работы (Которая должна быть прописана на серверной стороне).
- Разработка сложных ajax-интерфейсов. Простые интерфейсы (к примеру просмотр детального содержания элемента) **можно и нужно** реализовывать на этапе вёрстки.

<a name="base"></a>
## Создание структуры расположения файлов и папок
Для эффективной организации и более универсально реализации проектов необходимо придерживаться следующей структуры расположения файлов:
- **корень_сайта/local/codenails** - в этой папке располагаются все рабочие файлы, относящиеся к проекту.
    - **css** - в этой папке располагаются стили
    - **js** - в этой папке располагаются js-скрипты
    - **images** - в этой папке располагаются изображения, относящиеся к оформлению вёрстки (фоновые картинки, иконки и т.п.)
        + **content** - в этой папке лежат только изображения, относящиеся к контенту, **после интеграции вёрстки в шаблон эта папка удаляется.**
    - **includes** - в этой папке располагаются, при необходимости и при использовании быстрого старта, включаемые и однотипные области (меню, баннеры).


<a name="principle"></a>
## Общие принципы построения вёрстки
- **Масштабируемость**. Должно быть не слишком сложно добавить ещё один элемент, подобный уже готовому
    - В верстке должно учитываться, что размер реального контента может оказаться больше или меньше, чем в дизайне. Следует добиваться, чтобы при этом внешний вид элемента в целом выглядел прилично (не выглядел как недоработка/ошибка в верстке).
    - Элементы верстки, относящиеся к некоей одной сущности (функционалу, например кнопки), должны верстаться таким образом, чтобы подобный блок мог быть вставлен в любое другое место страницы или продублирован (т.е. не следует в подобных блоках использовать стили, основанные на элементах, не входящие в данный блок).
- **Логичный, лаконичный, читабельный css-код**. Должна быть правильно выстроена иерархия стилей, чтобы минимизировать применение параметра !important, а также сократить размер css-файла и повысить его удобочитаемость. Лучше использовать несколько классов у одного блока, чем дублировать стили для разных похожих классов. **На атрибут id запрещено навешивать css-оформление**, допускается лишь в исключительных случаях.
- **На каждый макет дизайна готовится отдельная страница**, при этом стили и скрипты должны использоваться одни и те же. Допускается использование дополнительных стилей и скриптов в отдельных случаях (к примеру если слайдер по дизайну и по ТЗ размещается только на одной странице).
- **Комментарии всего и вся**. Следует комментировать и css и html и js коды, лишние комментарии проще удалить, чем пытаться разобраться в коде без комментариев.
- Если сайт должен быть адаптивным, то вёрстка строится по принципу [mobile-first](http://ru.wikipedia.org/wiki/Адаптивный_веб-дизайн#.D0.A1.D0.BD.D0.B0.D1.87.D0.B0.D0.BB.D0.B0_.D0.BC.D0.BE.D0.B1.D0.B8.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5_.28.C2.ABMobile_first.C2.BB.29).

<a name="php-html"></a>
## Разметка кода на php/html

<div class="tip">
    Под разметкой понимается создание полноценной страницы в соответсвии с дизайном и техническим заданием проекта.
</div>

При разметке страниц верстки следуют учитывать следующее:
- Для более эффективной организации работы следует использовать набор [Быстрый старт](https://info.bitrix24.ru/workgroups/group/197/). Он полностью соответствует требованиям данного документа.
- Вёрстка осуществляется по стандарту HTML5. 
- Кодировка по умолчанию: **UTF-8**.
- Шапка сайта заключается в тег `<header />`
- Основная навигация по сайту - в тег `<nav />`
- Контентные блоки сайта заключаются в тег `<section/>`, но лишь в том случаи, если они нормально воспринимаются отдельно от всего контента страницы. (например блок с новостями или статьями сайта.)
- Подвал сайта - в тег `<footer/>`.
- Вёрстка должна полностью проходить [валидацию](http://validator.w3.org/).
- **Запрещено использование таблиц для нетабличных данных!**
- При разметке страниц так же следует делать микроразметку. 
    + Ссылки на стандарт: [schema.org](http://schema.org/), [ruschema.org](http://ruschema.org/). 
    + Инструменты проверки: [от google](http://www.google.ru/webmasters/tools/richsnippets?hl=ru), [от яндекса](http://webmaster.yandex.ru/microtest.xml).
- В качестве отступов используем табуляцию (а не пробелы).
- Если закрывающий тег находится от открывающего дальше чем через 4 строки - необходимо ставить после него html-комментарий `<div class="class"></div> <!-- .class -->`.
- В подвале сайта необходимо предусмотреть блок с `id="bx-composite-banner"`, размером 182x31px. Этот блок необходим для отображения баннера композитного режима работы bitrix.

#### Пример простейшей страницы:
```html
    <!doctype html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>Заголвок</title>
    </head>
    <body>
        <header>
            Шапка сайта
            <nav>
                <ul>
                    <li><a href="#" title="">пункт меню</a></li>
                    <li><a href="#" title="">пункт меню</a></li>
                </ul>
            </nav>
        </header>
        <div class="content">
            <h1>Заголовок страницы</h1>
            <section>
                <h2>Второстепенный заголовок</h2>
                Далеко-далеко за.
            </section>
        </div> <!-- .content -->
        <footer>
            подвал сайта
        </footer>
    </body>
    </html>
```


<a name="less-css"></a>
## Создание стилей less/css
<div class="tip">
    Под созданием стилей понимается создание одного результирующего фала стилей (css-файл) вне зависимости от использования препроцессоров (less, sass). В отдельных случаях допускается использование нескольких css файлов, к примеру если в проекте есть плагины (карусель, слайдеры, внешние сервисы) с большими объёмами css-кода.
</div>

При создании стилей следует учитывать следующее:
- Приветствуется использование [LESS](http"//lesscss.ru). В качестве компилятора рекомендуется использовать [prepros](http://alphapixels.com/prepros/) при этом в настройках отключить авторасстановки префиксов, расставлять их следует либо вручную, либо через миксины. *Это связано с техническими моментами компиляции средствами php на серверной стороне.*
- Основные правила написания LESS-кода описаны на [этой странице](http://pafnuty.name/less-rules.html).
- Результирующий css-файл должен быть один вне зависимости от использования препроцессоров.
- Логические блоки кода следует разделять блоками с комментариями.
- Все кликабельные элементы должны иметь `cursor: pointer;`, а так же визуально реагировать на три состояния: обычное, при наведении (:hover), активное (:active, :focus). Если эти состояния не описаны в дизайне - ~~следует поставить минус в карму дизайнеру и~~ реализовать эти поведения на своё усмотрение, но не внося дисгармонии в общий дизайн сайта.
- Все видимые инпуты форм должны реагировать на получение фокуса (:focus) и, если это предусмотрено дизайном, при наведении. Если эти состояния не описаны в дизайне - ~~следует поставить минус в карму дизайнеру и~~ реализовать реакцию на получение фокуса на своё усмотрение, но не внося дисгармонии в общий дизайн сайта.
- CSS-код должен быть легко читаем, с понятными названиями классов. *Это требуется для безболезненной передачи проекта другому разработчику.*
- Не следует использовать следующие названия классов, *т.к. они зарезервированы системными стилями bitrix*:
    - section (исп. в всплывающем окне редактирования параметров компонентов)
    - empty (исп. в всплывающем окне редактирования параметров компонентов)

- **Ни при каких условиях не используем reset.css** Вместо этого используем **в обязательном порядке [normalize.css](http://necolas.github.io/normalize.css/)**
- В качестве отступов используем табуляцию (а не пробелы).
- Стили для пользовательского интерфейса форм (инпуты, текстовые поля, кнопки) должны основываться на именах классов, а не на html-тегах. Т.е. к примеру класс `.btn`, применённый к диву, должен визуально превращать этот див в кнопку.
- Составные свойства (например, padding, margin) группируем в одно.


<a name="js-jquery"></a>
## Написание необходимых скриптов js/jQuery
>Под написанием js-скриптов понимается создание одного рабочего js-файла

- В качестве библиотеки используем **jQuery 2.x**. Если в ТЗ прописана поддержка IE8 - используем последнюю актуальную версию jQuery 1.x.
- **Комментарии в коде обязательны!** В качестве стандарта используем [jsDoc](http://ru.wikipedia.org/wiki/JSDoc).
- Если какой то код можно превратить в функцию - делаем это.
- Если какую-то функцию можно превратить в плагин - превращаем.
- Не используем устаревшие функции. 
```javascript 
    //Например: 
    //Вместо 
    $('.element').click(function(){}); 
    // Используем 
    $(document).on('click', '.element', function(){});
```
- Инициализацию необходимых плагинов производим в одном основном рабочем файле, который подключается к странице. При этом учитываем тот факт, что элемент, на который навешивается плагин, может отсутствовать на странице (если плагин плохо написан, он может выдавать ошибку).
- При использовании плагинов следует правильно именовать их по типу jquery.[имя_плагина][.min].js и по умолчанию минимизировать код плагина, оставляя ссылку на источник, откуда взят плагин в комментариях на первой строке и версию плагина. Пример:
```javascript
/*! http://site.ru | v.1.0 */
jQuery(document).ready(function(a){a(".btn-quont").on("click",function(){var b=a(this),c=b.parent().find("input").val();if("+"==b.text())var d=parseInt(c)+1;else if(c>0)var d=parseInt(c)-1;else d=0;b.parent().find("input").val(d)})});
```
- ---


<a name="images"></a>
## Подготовка изображений
При подготовке изображений для вёрстки следует учитывать следующее:
- Все иконки объединяем в спрайт.
- Вcе изображения, объёмом менее 500 байт смело перегоняем в [base64](http://b64i.ru/)
- Для уменьшения объёма изображений используем сервис [kraken.io](https://kraken.io/web-interface), не забываем, что сжимать надо в режиме lossless (без потерь).
- Для вставки картинок в контент (картинки, которые будут удалены при интеграции вёрстки) можно использовать сервисы картинок-заглушек: [lorempixel](http://lorempixel.com/), [imgholder.ru](http://imgholder.ru/). Тогда не придётся лишние телодвижения совершать.
- Если в PSD используется такой способ реализации задумки дизайнера, при котором невозможно адекватно сохранить картинку - нужно передать дизайн на доработку, либо попросить дизайнера сохранить картинку в нужном формате ~~,пусть помучается~~.

<a name="testing"></a>
## Тестирование 
При тестировании выделяем браузеры, под которые нужно делать:
- «абсолютную» поддержку (полное соответствие дизайну и дизайн-проекту). По умолчанию это браузеры, прописанные в ТЗ. Если в ТЗ нет такого, то тестируем под актуальными версиями Chrome, Firefox, Safari, Opera 12.x, а так же IE9-11.
- «относительную» поддержку (не допускать явного визуального смещения элементов). Если при этом некоторые эффекты не будут отображаться (к примеру, вместо «вдавленного» текста - простой), об этом нужно предупредить менеджера. Это для более ранних версий браузеров, чем указаны в ТЗ.
- ~~для совсем старых версий браузеров (на данный момент это **IE8*- и ниже) вверху страницы выводим пользователю предупреждение о  необходимости скачать обновление. Вывод предупреждения так же описывается в ТЗ, либо реализуется на усмотрение верстальщика.~~
- Если сайт адаптивный, то вёрстка тестируется на iphone, ipad и на современном смартфоне и планшете Android (4.x).





